{"ast":null,"code":"import DocumentReference from \"../DocumentReference\";\nimport Blob from \"../Blob\";\nimport { DOCUMENT_ID } from \"../FieldPath\";\nimport FieldValue from \"../FieldValue\";\nimport GeoPoint from \"../GeoPoint\";\nimport Path from \"../Path\";\nimport { typeOf } from \"../../../utils\";\nimport Timestamp from \"../Timestamp\";\nexport var buildNativeMap = function buildNativeMap(data) {\n  var nativeData = {};\n\n  if (data) {\n    Object.keys(data).forEach(function (key) {\n      var typeMap = buildTypeMap(data[key]);\n\n      if (typeMap) {\n        nativeData[key] = typeMap;\n      }\n    });\n  }\n\n  return nativeData;\n};\nexport var buildNativeArray = function buildNativeArray(array) {\n  var nativeArray = [];\n\n  if (array) {\n    array.forEach(function (value) {\n      var typeMap = buildTypeMap(value);\n\n      if (typeMap) {\n        nativeArray.push(typeMap);\n      }\n    });\n  }\n\n  return nativeArray;\n};\nexport var buildTypeMap = function buildTypeMap(value) {\n  var type = typeOf(value);\n\n  if (Number.isNaN(value)) {\n    return {\n      type: 'nan',\n      value: null\n    };\n  }\n\n  if (value === Infinity) {\n    return {\n      type: 'infinity',\n      value: null\n    };\n  }\n\n  if (value === null || value === undefined) {\n    return {\n      type: 'null',\n      value: null\n    };\n  }\n\n  if (value === DOCUMENT_ID) {\n    return {\n      type: 'documentid',\n      value: null\n    };\n  }\n\n  if (type === 'boolean' || type === 'number' || type === 'string') {\n    return {\n      type: type,\n      value: value\n    };\n  }\n\n  if (type === 'array') {\n    return {\n      type: type,\n      value: buildNativeArray(value)\n    };\n  }\n\n  if (type === 'object') {\n    if (value instanceof DocumentReference) {\n      return {\n        type: 'reference',\n        value: value.path\n      };\n    }\n\n    if (value instanceof GeoPoint) {\n      return {\n        type: 'geopoint',\n        value: {\n          latitude: value.latitude,\n          longitude: value.longitude\n        }\n      };\n    }\n\n    if (value instanceof Timestamp) {\n      return {\n        type: 'timestamp',\n        value: {\n          seconds: value.seconds,\n          nanoseconds: value.nanoseconds\n        }\n      };\n    }\n\n    if (value instanceof Date) {\n      return {\n        type: 'date',\n        value: value.getTime()\n      };\n    }\n\n    if (value instanceof Blob) {\n      return {\n        type: 'blob',\n        value: value.toBase64()\n      };\n    }\n\n    if (value instanceof FieldValue) {\n      return {\n        type: 'fieldvalue',\n        value: {\n          elements: value.elements,\n          type: value.type\n        }\n      };\n    }\n\n    return {\n      type: 'object',\n      value: buildNativeMap(value)\n    };\n  }\n\n  console.warn(\"Unknown data type received \" + type);\n  return null;\n};\nexport var parseNativeMap = function parseNativeMap(firestore, nativeData) {\n  var data;\n\n  if (nativeData) {\n    data = {};\n    Object.keys(nativeData).forEach(function (key) {\n      data[key] = parseTypeMap(firestore, nativeData[key]);\n    });\n  }\n\n  return data;\n};\n\nvar parseNativeArray = function parseNativeArray(firestore, nativeArray) {\n  var array = [];\n\n  if (nativeArray) {\n    nativeArray.forEach(function (typeMap) {\n      array.push(parseTypeMap(firestore, typeMap));\n    });\n  }\n\n  return array;\n};\n\nvar parseTypeMap = function parseTypeMap(firestore, typeMap) {\n  var type = typeMap.type,\n      value = typeMap.value;\n\n  if (type === 'null') {\n    return null;\n  }\n\n  if (type === 'boolean' || type === 'number' || type === 'string') {\n    return value;\n  }\n\n  if (type === 'array') {\n    return parseNativeArray(firestore, value);\n  }\n\n  if (type === 'object') {\n    return parseNativeMap(firestore, value);\n  }\n\n  if (type === 'reference') {\n    return new DocumentReference(firestore, Path.fromName(value));\n  }\n\n  if (type === 'geopoint') {\n    return new GeoPoint(value.latitude, value.longitude);\n  }\n\n  if (type === 'timestamp') {\n    return new Timestamp(value.seconds, value.nanoseconds);\n  }\n\n  if (type === 'date') {\n    return new Date(value);\n  }\n\n  if (type === 'blob') {\n    return Blob.fromBase64String(value);\n  }\n\n  if (type === 'infinity') {\n    return Infinity;\n  }\n\n  if (type === 'nan') {\n    return NaN;\n  }\n\n  console.warn(\"Unknown data type received \" + type);\n  return value;\n};","map":{"version":3,"names":["DocumentReference","Blob","DOCUMENT_ID","FieldValue","GeoPoint","Path","typeOf","Timestamp","buildNativeMap","data","nativeData","Object","keys","forEach","key","typeMap","buildTypeMap","buildNativeArray","array","nativeArray","value","push","type","Number","isNaN","Infinity","undefined","path","latitude","longitude","seconds","nanoseconds","Date","getTime","toBase64","elements","console","warn","parseNativeMap","firestore","parseTypeMap","parseNativeArray","fromName","fromBase64String","NaN"],"sources":["C:/Users/PC/Desktop/All/StoreApp2/my-app/node_modules/react-native-firebase/dist/modules/firestore/utils/serialize.js"],"sourcesContent":["import DocumentReference from '../DocumentReference';\nimport Blob from '../Blob';\nimport { DOCUMENT_ID } from '../FieldPath';\nimport FieldValue from '../FieldValue';\nimport GeoPoint from '../GeoPoint';\nimport Path from '../Path';\nimport { typeOf } from '../../../utils';\nimport Timestamp from '../Timestamp';\n/*\n * Functions that build up the data needed to represent\n * the different types available within Firestore\n * for transmission to the native side\n */\n\nexport const buildNativeMap = data => {\n  const nativeData = {};\n\n  if (data) {\n    Object.keys(data).forEach(key => {\n      const typeMap = buildTypeMap(data[key]);\n\n      if (typeMap) {\n        nativeData[key] = typeMap;\n      }\n    });\n  }\n\n  return nativeData;\n};\nexport const buildNativeArray = array => {\n  const nativeArray = [];\n\n  if (array) {\n    array.forEach(value => {\n      const typeMap = buildTypeMap(value);\n\n      if (typeMap) {\n        nativeArray.push(typeMap);\n      }\n    });\n  }\n\n  return nativeArray;\n};\nexport const buildTypeMap = value => {\n  const type = typeOf(value);\n\n  if (Number.isNaN(value)) {\n    return {\n      type: 'nan',\n      value: null\n    };\n  }\n\n  if (value === Infinity) {\n    return {\n      type: 'infinity',\n      value: null\n    };\n  }\n\n  if (value === null || value === undefined) {\n    return {\n      type: 'null',\n      value: null\n    };\n  }\n\n  if (value === DOCUMENT_ID) {\n    return {\n      type: 'documentid',\n      value: null\n    };\n  }\n\n  if (type === 'boolean' || type === 'number' || type === 'string') {\n    return {\n      type,\n      value\n    };\n  }\n\n  if (type === 'array') {\n    return {\n      type,\n      value: buildNativeArray(value)\n    };\n  }\n\n  if (type === 'object') {\n    if (value instanceof DocumentReference) {\n      return {\n        type: 'reference',\n        value: value.path\n      };\n    }\n\n    if (value instanceof GeoPoint) {\n      return {\n        type: 'geopoint',\n        value: {\n          latitude: value.latitude,\n          longitude: value.longitude\n        }\n      };\n    }\n\n    if (value instanceof Timestamp) {\n      return {\n        type: 'timestamp',\n        value: {\n          seconds: value.seconds,\n          nanoseconds: value.nanoseconds\n        }\n      };\n    }\n\n    if (value instanceof Date) {\n      return {\n        type: 'date',\n        value: value.getTime()\n      };\n    }\n\n    if (value instanceof Blob) {\n      return {\n        type: 'blob',\n        value: value.toBase64()\n      };\n    } // TODO: Salakar: Refactor in v6 - add internal `type` flag\n\n\n    if (value instanceof FieldValue) {\n      return {\n        type: 'fieldvalue',\n        value: {\n          elements: value.elements,\n          type: value.type\n        }\n      };\n    }\n\n    return {\n      type: 'object',\n      value: buildNativeMap(value)\n    };\n  }\n\n  console.warn(`Unknown data type received ${type}`);\n  return null;\n};\n/*\n * Functions that parse the received from the native\n * side and converts to the correct Firestore JS types\n */\n\nexport const parseNativeMap = (firestore, nativeData) => {\n  let data;\n\n  if (nativeData) {\n    data = {};\n    Object.keys(nativeData).forEach(key => {\n      data[key] = parseTypeMap(firestore, nativeData[key]);\n    });\n  }\n\n  return data;\n};\n\nconst parseNativeArray = (firestore, nativeArray) => {\n  const array = [];\n\n  if (nativeArray) {\n    nativeArray.forEach(typeMap => {\n      array.push(parseTypeMap(firestore, typeMap));\n    });\n  }\n\n  return array;\n};\n\nconst parseTypeMap = (firestore, typeMap) => {\n  const {\n    type,\n    value\n  } = typeMap;\n\n  if (type === 'null') {\n    return null;\n  }\n\n  if (type === 'boolean' || type === 'number' || type === 'string') {\n    return value;\n  }\n\n  if (type === 'array') {\n    return parseNativeArray(firestore, value);\n  }\n\n  if (type === 'object') {\n    return parseNativeMap(firestore, value);\n  }\n\n  if (type === 'reference') {\n    return new DocumentReference(firestore, Path.fromName(value));\n  }\n\n  if (type === 'geopoint') {\n    return new GeoPoint(value.latitude, value.longitude);\n  }\n\n  if (type === 'timestamp') {\n    return new Timestamp(value.seconds, value.nanoseconds);\n  }\n\n  if (type === 'date') {\n    return new Date(value);\n  }\n\n  if (type === 'blob') {\n    return Blob.fromBase64String(value);\n  }\n\n  if (type === 'infinity') {\n    return Infinity;\n  }\n\n  if (type === 'nan') {\n    return NaN;\n  }\n\n  console.warn(`Unknown data type received ${type}`);\n  return value;\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}